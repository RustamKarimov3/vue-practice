{"version":3,"sources":["webpack:///./src/views/Auth.vue","webpack:///./src/use/useLoginForm.js","webpack:///./src/views/Auth.vue?eea7","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["for","class","onSumbit","emailError","emailValue","id","type","handleEmailBlur","passwordError","passwordValue","handlePasswordBlur","disabled","isSubmitting","isTooManyAttempts","useLoginForm","store","useStore","router","useRouter","useForm","handleSubmit","submitCount","useField","yup","trim","required","email","value","errorMessage","handleBlur","min","values","dispatch","isSuccess","push","computed","watch","v","setTimeout","setup","loginForm","route","query","message","error","render","__scopeId","$","$trim","forcedStringTrimMethod","target","proto","forced","this","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","fails","non","METHOD_NAME","name"],"mappings":"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","file":"js/chunk-0f94c309.029aae3f.js","sourcesContent":["<template>\n    <form class=\"card\" @submit.prevent=\"onSumbit\">\n        <h1>Войти в систему</h1>\n        <div class=\"form-control\" :class=\"{invalid: !!emailError}\">\n            <label for=\"email\">Email</label>\n            <input v-model=\"emailValue\" id=\"email\" type=\"email\" @blur=\"handleEmailBlur\" />\n            <small v-if=\"emailError\">{{ emailError }}</small>\n        </div>\n        <div class=\"form-control\" :class=\"{invalid: !!passwordError}\">\n            <label for=\"password\">Password</label>\n            <input id=\"password\" type=\"password\" v-model=\"passwordValue\" @blur=\"handlePasswordBlur\" />\n            <small v-if=\"passwordError\">{{ passwordError }}</small>\n        </div>\n\n        <button class=\"btn primary\" type=\"submit\" :disabled=\"isSubmitting || isTooManyAttempts\">Войти</button>\n        <div class=\"text-danger\" v-if=\"isTooManyAttempts\">Слишком часто пытаетесь войти в систему</div>\n    </form>\n</template>\n\n<script>\n\nimport { useRoute } from 'vue-router';\nimport { useLoginForm } from '../use/useLoginForm';\nimport { computed, onMounted, watch, watchEffect } from 'vue';\nimport { useStore } from 'vuex';\nimport { errors } from '../utils/error';\n\n\n    export default {\n        setup() {\n            const loginForm = useLoginForm();\n            const store = useStore();\n\n            const route = useRoute();\n\n            if (route.query.message) {\n                store.dispatch('setMessage', {value: errors[route.query.message], type: 'danger'})\n            }\n\n            return {...loginForm}\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>","import { computed, ref, watch } from 'vue';\nimport {useField, useForm} from 'vee-validate';\nimport * as yup from 'yup';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n\nexport const useLoginForm = () => {\n    const store = useStore();\n    const router = useRouter()\n    const {handleSubmit, isSubmitting, submitCount} = useForm();\n\n    const {value: emailValue, errorMessage: emailError, handleBlur: handleEmailBlur} = useField('email', yup.string().trim().required('Введите мэйл').email('email не корректный'))\n    const {value: passwordValue, errorMessage: passwordError, handleBlur: handlePasswordBlur} = useField('password', yup.string().trim().required(\"Введите пароль\").min(6, 'Должен быть больше 6 симоволов'))\n\n    const onSumbit = handleSubmit(async (values) => {\n        const isSuccess = await store.dispatch('auth/login', values);\n\n        if (isSuccess) {\n            router.push('/');\n        }\n    })\n\n    const isTooManyAttempts = computed(() => submitCount.value >= 3);\n\n    watch(isTooManyAttempts, (v) => {\n        if (v) {\n            setTimeout(() => submitCount.value = 0, 1500)\n        }\n    })\n\n\n    return {emailValue, emailError, handleEmailBlur, passwordValue, passwordError, handlePasswordBlur, onSumbit, isSubmitting, isTooManyAttempts}\n}","import { render } from \"./Auth.vue?vue&type=template&id=97a8f5ae&scoped=true\"\nimport script from \"./Auth.vue?vue&type=script&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-97a8f5ae\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}